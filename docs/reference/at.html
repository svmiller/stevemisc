<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Scoped Helper Verbs — center_at • stevemisc</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Scoped Helper Verbs — center_at"><meta property="og:description" content="Scoped helper verbs included in this R Documentation file
allow for targeted commands on specified columns. They also rename
the ensuing output to conform to my preferred style. The commands here
are multiple and explained in the details section below."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">stevemisc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.4.19</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/svmiller/stevemisc/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Scoped Helper Verbs</h1>
    <small class="dont-index">Source: <a href="https://github.com/svmiller/stevemisc/blob/HEAD/R/at.R" class="external-link"><code>R/at.R</code></a></small>
    <div class="hidden name"><code>at.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Scoped helper verbs included in this R Documentation file
allow for targeted commands on specified columns. They also rename
the ensuing output to conform to my preferred style. The commands here
are multiple and explained in the details section below.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">center_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, prefix <span class="op">=</span> <span class="st">"c"</span>, na <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="fu">diff_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, o <span class="op">=</span> <span class="fl">1</span>, prefix <span class="op">=</span> <span class="st">"d"</span><span class="op">)</span>

<span class="fu">group_mean_center_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, mean_prefix <span class="op">=</span> <span class="st">"mean"</span>, prefix <span class="op">=</span> <span class="st">"b"</span>, na <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="fu">lag_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, prefix <span class="op">=</span> <span class="st">"l"</span>, o <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>

<span class="fu">log_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, prefix <span class="op">=</span> <span class="st">"ln"</span>, plus_1 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="fu">mean_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, prefix <span class="op">=</span> <span class="st">"mean"</span>, na <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="fu">r1sd_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, prefix <span class="op">=</span> <span class="st">"s"</span>, na <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="fu">r2sd_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, prefix <span class="op">=</span> <span class="st">"z"</span>, na <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>a data frame</p></dd>


<dt>x</dt>
<dd><p>a vector, likely in your data frame</p></dd>


<dt>prefix</dt>
<dd><p>Allows the user to rename the prefix of the new variables.  Each
function has defaults (see details section).</p></dd>


<dt>na</dt>
<dd><p>what to do with NAs in the vector. Defaults to TRUE
(i.e. passes over the missing observations). Not applicable to <code>diff_at</code>.</p></dd>


<dt>o</dt>
<dd><p>The order of lags for calculating differences or lags in
<code>diff_at</code> or <code>lag_at</code>. Applicable only to these functions.</p></dd>


<dt>mean_prefix</dt>
<dd><p>Applicable only to <code>group_mean_center_at</code>. Specifies
the prefix of the (assumed) total population mean variables. Default is "mean",
though the user can change this as they see fit.</p></dd>


<dt>plus_1</dt>
<dd><p>Applicable only to <code>log_at</code>. If TRUE, adds 1 to the
variables prior to log transformation. If FALSE, performs logarithmic
transformation on variables no matter whether 0 occurs (i.e. 0s will
come back as -Inf). Defaults to FALSE.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The function returns a set of new vectors in a data frame after
performing relevant functions. The new vectors have distinct prefixes
corresponding with the action performed on them.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><code>center_at</code> is a wrapper for <code>mutate_at</code> and <code>rename_at</code> from
<span class="pkg">dplyr</span>. It takes supplied vectors and effectively centers them from the
mean. It then renames these new variables to have a prefix of <code>c_</code>. The
default prefix ("c") can be changed by way of an argument in the function.</p>
<p><code>diff_at</code> is a wrapper for <code>mutate_at</code> and <code>rename_at</code> from
<span class="pkg">dplyr</span>. It takes supplied vectors and creates differences from the
previous value recorded above it. It then renames these new variables to have
a prefix of <code>d_</code> (in the case of a first difference), or something like
<code>d2_</code> in the case of second differences, or <code>d3_</code> in the case of
third differences (and so on). The exact prefix depends on the <code>l</code>
argument, which communicates the order of lags you want. It defaults to 1. The
default prefix ("d") can be changed by way of an argument in the function.</p>
<p><code>group_mean_center_at</code> is a wrapper for <code>mutate</code> and <code>across</code>
in <span class="pkg">dplyr</span>. It takes supplied vectors and centers an (assumed) group mean
of the variables from an (assumed) total population mean of the variables
provided to it. It then returns the new variables with a prefix, whose default
is <code>b_</code>. This prefix communicates, if you will, a kind of "between"
variable in the panel model context, in juxtaposition to "within" variables
in the panel model context.</p>
<p><code>lag_at</code> is a wrapper for <code>mutate</code> and <code>across</code> from
<span class="pkg">dplyr</span>. It takes supplied vector(s) and creates lag variables from them.
These new variables have a prefix of <code>l[o]_</code> where <code>o</code> corresponds
to the order of the lag. This default prefix ("l") can be
changed by way of an argument in the function.</p>
<p><code>log_at</code> is a wrapper for <code>mutate_at</code> and <code>rename_at</code> from
<span class="pkg">dplyr</span>. It takes supplied vectors and creates a variable that takes
a natural logarithmic transformation of them. It then renames these new
variables to have a prefix of <code>ln_</code>. This default prefix ("ln") can be
changed by way of an argument in the function.</p>
<p><code>mean_at</code> is a wrapper for <code>mutate_at</code> and <code>rename_at</code> from
<span class="pkg">dplyr</span>. It takes supplied vectors and creates a variable communicating
the mean of the variable. It then renames these new variables to have a
prefix of <code>mean_</code>. This default prefix ("mean") can be changed by way of
an argument in the function.</p>
<p><code>r1sd_at</code> is a wrapper for <code>mutate_at</code> and <code>rename_at</code> from
<span class="pkg">dplyr</span>. It both rescales the supplied vectors to new vectors and renames
the vectors to each have a prefix of <code>s_</code>. Note the rescaling here is
just by one standard deviation and not two. The default prefix ("s") can be
changed by way of an argument in the function.</p>
<p><code>r2sd_at</code> is a wrapper for <code>mutate_at</code> and <code>rename_at</code> from
<span class="pkg">dplyr</span>. It both rescales the supplied vectors to new vectors and renames
the vectors to each have a prefix of <code>z_</code>. Note the rescaling here is by
two standard deviations and not one. The default prefix ("z") can be
changed by way of an argument in the function.</p>
<p>All functions, except for <code>lag_at</code>, will fail in the absence of a
character vector of a length of one. They are intended to work across multiple
columns instead of just one. If you are wanting to create one new variable,
you should think about using some other <span class="pkg">dplyr</span> verb on its own.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">8675309</span><span class="op">)</span></span>
<span class="r-in"><span class="va">Example</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>category <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span class="r-in">                                   <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span class="r-in">                                   <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"C"</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">                      x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">15</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">15</span><span class="op">)</span>,</span>
<span class="r-in">                      z <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, <span class="fl">15</span>, replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">my_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">center_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z         c_x         c_y c_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9 -0.45270578  0.38488743  -4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 -0.13400109  0.18302851   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15  0.15260928 -0.32708389   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20  0.15749826  0.28358381   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 -0.34364092  0.18252640   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14  0.06085649 -0.47270853   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17  0.36660137  0.31376756   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8  0.23413755  0.31342741  -5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16  0.24446673 -0.20072218   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 -0.16702927  0.02631747   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12  0.22604312  0.13613631  -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 -0.02887250 -0.27869455   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 -0.10123826 -0.45415826  -8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 -0.35202128 -0.37336494  -7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6  0.13729632  0.28305746  -7</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">diff_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z          d_x           d_y d_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9           NA            NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19  0.318704692 -0.2018589161  10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15  0.286610370 -0.5101124048  -4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20  0.004888979  0.6106676969   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 -0.501139179 -0.1010574063  -6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14  0.404497413 -0.6552349348   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17  0.305744875  0.7864760908   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8 -0.132463813 -0.0003401469  -9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16  0.010329181 -0.5141495881   8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 -0.411496004  0.2270396501   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12  0.393072386  0.1098188350  -4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 -0.254915616 -0.4148308551   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 -0.072365765 -0.1754637090 -13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 -0.250783015  0.0807933176   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6  0.489317597  0.6564223976   0</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">diff_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span>, o<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z         d3_x          d3_y d3_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9           NA            NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19           NA            NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15           NA            NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20  0.610204041 -0.1013036240   11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 -0.209639830 -0.0005021142   -5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14 -0.091752786 -0.1456246441   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17  0.209103110  0.0301837497   -3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8  0.577778475  0.1309010091   -6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16  0.183610243  0.2719863558    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 -0.533630636 -0.2874500849   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12 -0.008094437 -0.1772911029    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 -0.273339234 -0.0779723700    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5  0.065791005 -0.4804757291  -11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 -0.578064396 -0.5095012465   -6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6  0.166168816  0.5617520062  -12</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">lag_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z      l1_x       l1_y l1_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9        NA         NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 0.1594836 0.91822046    9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15 0.4781883 0.71636154   19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20 0.7647987 0.20624914   15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 0.7696877 0.81691683   20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14 0.2685485 0.71585943   14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17 0.6730459 0.06062449   14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8 0.9787908 0.84710058   17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16 0.8463270 0.84676044    8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 0.8566562 0.33261085   16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12 0.4451601 0.55965050   16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 0.8382325 0.66946933   12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 0.5833169 0.25463848   18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 0.5109512 0.07917477    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6 0.2601681 0.15996809    6</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">lag_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span>, o<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z      l1_x      l2_x      l3_x       l1_y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9        NA        NA        NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 0.1594836        NA        NA 0.91822046</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15 0.4781883 0.1594836        NA 0.71636154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20 0.7647987 0.4781883 0.1594836 0.20624914</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 0.7696877 0.7647987 0.4781883 0.81691683</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14 0.2685485 0.7696877 0.7647987 0.71585943</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17 0.6730459 0.2685485 0.7696877 0.06062449</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8 0.9787908 0.6730459 0.2685485 0.84710058</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16 0.8463270 0.9787908 0.6730459 0.84676044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 0.8566562 0.8463270 0.9787908 0.33261085</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12 0.4451601 0.8566562 0.8463270 0.55965050</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 0.8382325 0.4451601 0.8566562 0.66946933</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 0.5833169 0.8382325 0.4451601 0.25463848</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 0.5109512 0.5833169 0.8382325 0.07917477</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6 0.2601681 0.5109512 0.5833169 0.15996809</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          l2_y       l3_y l1_z l2_z l3_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          NA         NA   NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          NA         NA    9   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.91822046         NA   19    9   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0.71636154 0.91822046   15   19    9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.20624914 0.71636154   20   15   19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.81691683 0.20624914   14   20   15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  0.71585943 0.81691683   14   14   20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  0.06062449 0.71585943   17   14   14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  0.84710058 0.06062449    8   17   14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 0.84676044 0.84710058   16    8   17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 0.33261085 0.84676044   16   16    8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 0.55965050 0.33261085   12   16   16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 0.66946933 0.55965050   18   12   16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 0.25463848 0.66946933    5   18   12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 0.07917477 0.25463848    6    5   18</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">log_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z        ln_x        ln_y     ln_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9 -1.83581396 -0.08531777 2.197225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 -0.73775063 -0.33357029 2.944439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15 -0.26814262 -1.57867043 2.708050</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20 -0.26177046 -0.20221798 2.995732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 -1.31472376 -0.33427146 2.639057</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14 -0.39594173 -2.80305628 2.639057</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17 -0.02143736 -0.16593584 2.833213</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8 -0.16684950 -0.16633746 2.079442</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16 -0.15471866 -1.10078209 2.772589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 -0.80932117 -0.58044280 2.772589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12 -0.17645973 -0.40126992 2.484907</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 -0.53902464 -1.36791047 2.890372</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 -0.67148128 -2.53609759 1.609438</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 -1.34642717 -1.83278093 1.791759</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6 -0.28836799 -0.20286250 1.791759</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">log_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span>, plus_1 <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z      ln_x       ln_y     ln_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9 0.1479748 0.65139791 2.302585</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 0.3908172 0.54020667 2.995732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15 0.5680366 0.18751566 2.772589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20 0.5708031 0.59714102 3.044522</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 0.2378733 0.53991408 2.708050</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14 0.5146459 0.05885788 2.708050</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17 0.6824859 0.61361716 2.890372</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8 0.6131982 0.61343299 2.197225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16 0.6187771 0.28714006 2.833213</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 0.3682201 0.44446176 2.833213</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12 0.6088045 0.51250581 2.564949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 0.4595220 0.22684747 2.944439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 0.4127394 0.07619665 1.791759</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 0.2312452 0.14839249 1.945910</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6 0.5593219 0.59685128 1.945910</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">mean_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z    mean_x   mean_y mean_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6 0.6121894 0.533333     13</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">group_mean_center_at</span><span class="op">(</span><span class="fu">mean_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span>, <span class="va">my_vars</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The absence of a grouping factor means you're going to be subtracting a mean from itself. It's up to you if you want to do that. You probably didn't want that, but I did it anyway. I'm just bringing that to your attention.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>The ensuing output for these variables you created are all 0, indicating you subtracted a thing from a different version of itself in this function. Are you sure these mean variables aren't themselves actually group means? Check your code more carefully.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z    mean_x   mean_y mean_z b_x b_y b_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9 0.6121894 0.533333     13   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 0.6121894 0.533333     13   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15 0.6121894 0.533333     13   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20 0.6121894 0.533333     13   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 0.6121894 0.533333     13   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14 0.6121894 0.533333     13   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17 0.6121894 0.533333     13   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8 0.6121894 0.533333     13   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16 0.6121894 0.533333     13   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 0.6121894 0.533333     13   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12 0.6121894 0.533333     13   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 0.6121894 0.533333     13   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 0.6121894 0.533333     13   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 0.6121894 0.533333     13   0   0   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6 0.6121894 0.533333     13   0   0   0</span>
<span class="r-in"><span class="co"># ^ Alternatively, a better way:</span></span>
<span class="r-in"><span class="co"># Example %&gt;%</span></span>
<span class="r-in"><span class="co">#   mean_at(my_vars) %&gt;%</span></span>
<span class="r-in"><span class="co">#   group_by(category) %&gt;%</span></span>
<span class="r-in"><span class="co">#   group_mean_center_at(my_vars)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">r1sd_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z        s_x         s_y        s_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9 -1.8112227  1.22348833 -0.7954674</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 -0.5361226  0.58181493  1.1932011</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15  0.6105718 -1.03974121  0.3977337</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20  0.6301320  0.90146222  1.3920679</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 -1.3748670  0.58021879  0.1988668</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14  0.2434797 -1.50265592  0.1988668</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17  1.4667290  0.99741097  0.7954674</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8  0.9367569  0.99632970 -0.9943342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16  0.9780827 -0.63805992  0.5966005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 -0.6682645  0.08365854  0.5966005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12  0.9043720  0.43275298 -0.1988668</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 -0.1155155 -0.88592015  0.9943342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 -0.4050424 -1.44368791 -1.5909348</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 -1.4083958 -1.18686040 -1.3920679</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6  0.5493064  0.89978905 -1.3920679</span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">r2sd_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z         z_x         z_y         z_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9 -0.90561135  0.61174417 -0.39773369</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 -0.26806132  0.29090746  0.59660054</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15  0.30528590 -0.51987061  0.19886685</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20  0.31506602  0.45073111  0.69603396</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 -0.68743350  0.29010940  0.09943342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14  0.12173984 -0.75132796  0.09943342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17  0.73336452  0.49870548  0.39773369</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8  0.46837843  0.49816485 -0.49716712</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16  0.48904135 -0.31902996  0.29830027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 -0.33413225  0.04182927  0.29830027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12  0.45218599  0.21637649 -0.09943342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 -0.05775774 -0.44296007  0.49716712</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 -0.20252121 -0.72184395 -0.79546739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 -0.70419791 -0.59343020 -0.69603396</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6  0.27465322  0.44989453 -0.69603396</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Steve Miller.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

