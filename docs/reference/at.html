<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Scoped Helper Verbs — center_at • stevemisc</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.0/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.0/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Scoped Helper Verbs — center_at"><meta name="description" content="Scoped helper verbs included in this R Documentation file
allow for targeted commands on specified columns. They also rename
the ensuing output to conform to my preferred style. The commands here
are multiple and explained in the details section below."><meta property="og:description" content="Scoped helper verbs included in this R Documentation file
allow for targeted commands on specified columns. They also rename
the ensuing output to conform to my preferred style. The commands here
are multiple and explained in the details section below."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">stevemisc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.8.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/svmiller/stevemisc/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Scoped Helper Verbs</h1>
      <small class="dont-index">Source: <a href="https://github.com/svmiller/stevemisc/blob/HEAD/R/at.R" class="external-link"><code>R/at.R</code></a></small>
      <div class="d-none name"><code>at.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Scoped helper verbs included in this R Documentation file
allow for targeted commands on specified columns. They also rename
the ensuing output to conform to my preferred style. The commands here
are multiple and explained in the details section below.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">center_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, prefix <span class="op">=</span> <span class="st">"c"</span>, na <span class="op">=</span> <span class="cn">TRUE</span>, .by <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">diff_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, o <span class="op">=</span> <span class="fl">1</span>, prefix <span class="op">=</span> <span class="st">"d"</span>, .by <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">group_mean_center_at</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">x</span>,</span>
<span>  mean_prefix <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  prefix <span class="op">=</span> <span class="st">"b"</span>,</span>
<span>  na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">.by</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">lag_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, prefix <span class="op">=</span> <span class="st">"l"</span>, o <span class="op">=</span> <span class="fl">1</span>, .by <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">log_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, prefix <span class="op">=</span> <span class="st">"ln"</span>, plus_1 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">mean_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, prefix <span class="op">=</span> <span class="st">"mean"</span>, na <span class="op">=</span> <span class="cn">TRUE</span>, .by <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">r1sd_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, prefix <span class="op">=</span> <span class="st">"s"</span>, na <span class="op">=</span> <span class="cn">TRUE</span>, .by <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">r2sd_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, prefix <span class="op">=</span> <span class="st">"z"</span>, na <span class="op">=</span> <span class="cn">TRUE</span>, .by <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">rewb_at</span><span class="op">(</span><span class="va">data</span>, <span class="va">x</span>, w_prefix <span class="op">=</span> <span class="st">"w"</span>, b_prefix <span class="op">=</span> <span class="st">"b"</span>, <span class="va">.by</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>a data frame</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>a vector, likely in your data frame</p></dd>


<dt id="arg-prefix">prefix<a class="anchor" aria-label="anchor" href="#arg-prefix"></a></dt>
<dd><p>Allows the user to rename the prefix of the new variables.  Each
function has defaults (see details section).</p></dd>


<dt id="arg-na">na<a class="anchor" aria-label="anchor" href="#arg-na"></a></dt>
<dd><p>a logical about whether missing values should be ignored in the
creation of means and re-scaled variables. Defaults to TRUE (i.e. pass
over/remove missing observations). Not applicable to <code>diff_at</code>,
<code>lag_at</code>, and <code>log_at</code>.</p></dd>


<dt id="arg--by">.by<a class="anchor" aria-label="anchor" href="#arg--by"></a></dt>
<dd><p>a selection of columns by which to group the operation. Defaults
to NULL. This will eventually become a standard feature of the functions
as this operator moves beyond the experimental in <span class="pkg">dplyr</span>. The argument
is not applicable to <code>log_at</code> (why would it be) and is optional for all
functions except <code>group_mean_center_at</code>. <code>group_mean_center_at</code>
must have something specified for grouped mean-centering.</p></dd>


<dt id="arg-o">o<a class="anchor" aria-label="anchor" href="#arg-o"></a></dt>
<dd><p>The order of lags for calculating differences or lags in
<code>diff_at</code> or <code>lag_at</code>. Applicable only to these functions.</p></dd>


<dt id="arg-mean-prefix">mean_prefix<a class="anchor" aria-label="anchor" href="#arg-mean-prefix"></a></dt>
<dd><p>Applicable only to <code>group_mean_center_at</code>. Specifies
the prefix of the (assumed) total population mean variables. Default is "mean",
though the user can change this as they see fit.</p></dd>


<dt id="arg-plus-">plus_1<a class="anchor" aria-label="anchor" href="#arg-plus-"></a></dt>
<dd><p>Applicable only to <code>log_at</code>. If TRUE, adds 1 to the
variables prior to log transformation. If FALSE, performs logarithmic
transformation on variables no matter whether 0 occurs (i.e. 0s will
come back as -Inf). Defaults to FALSE.</p></dd>


<dt id="arg-w-prefix">w_prefix<a class="anchor" aria-label="anchor" href="#arg-w-prefix"></a></dt>
<dd><p>Applicable only to <code>rewb_at</code>, but specifies prefix for
so-called "within" variables created by this procedure. Defaults to "w".</p></dd>


<dt id="arg-b-prefix">b_prefix<a class="anchor" aria-label="anchor" href="#arg-b-prefix"></a></dt>
<dd><p>Applicable only to <code>rewb_at</code>, but specifies prefix for
so-called "between" variables created by this procedure. Defaults to "b".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The function returns a set of new vectors in a data frame after
performing relevant functions. The new vectors have distinct prefixes
corresponding with the action performed on them.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>center_at</code> is a wrapper for <code>mutate_at</code> and <code>rename_at</code> from
<span class="pkg">dplyr</span>. It takes supplied vectors and effectively centers them from the
mean. It then renames these new variables to have a prefix of <code>c_</code>. The
default prefix ("c") can be changed by way of an argument in the function.</p>
<p><code>diff_at</code> is a wrapper for <code>mutate</code> and <code>across</code> from
<span class="pkg">dplyr</span>. It takes supplied vectors and creates differences from the
previous value recorded above it. It then renames these new variables to have
a prefix of <code>d_</code> (in the case of a first difference), or something like
<code>d2_</code> in the case of second differences, or <code>d3_</code> in the case of
third differences (and so on). The exact prefix depends on the <code>o</code>
argument, which communicates the order of lags you want. It defaults to 1. The
default prefix ("d") can be changed by way of an argument in the function,
though the naming convention will omit a numerical prefix for first
differences.</p>
<p><code>group_mean_center_at</code> is a wrapper for <code>mutate</code> and <code>across</code>
in <span class="pkg">dplyr</span>. It takes supplied vectors and centers an (assumed) group mean
of the variables from an (assumed) total population mean of the variables
provided to it. It then returns the new variables with a prefix, whose default
is <code>b_</code>. This prefix communicates, if you will, a kind of "between"
variable in the panel model context, in juxtaposition to "within" variables
in the panel model context.</p>
<p><code>lag_at</code> is a wrapper for <code>mutate</code> and <code>across</code> from
<span class="pkg">dplyr</span>. It takes supplied vector(s) and creates lag variables from them.
These new variables have a prefix of <code>l[o]_</code> where <code>o</code> corresponds
to the order of the lag (specified by an argument in the function, which
defaults to 1). This default prefix ("l") can be changed by way of an
another argument in the function.</p>
<p><code>log_at</code> is a wrapper for <code>mutate</code> and <code>across</code> from
<span class="pkg">dplyr</span>. It takes supplied vectors and creates a variable that takes
a natural logarithmic transformation of them. It then renames these new
variables to have a prefix of <code>ln_</code>. This default prefix ("ln") can be
changed by way of an argument in the function. Users can optionally specify
that they want to add 1 to the vector before taking its natural logarithm,
which is a popular thing to do when positive reals have naturally occurring
zeroes.</p>
<p><code>mean_at</code> is a wrapper for <code>mutate</code> and <code>across</code> from
<span class="pkg">dplyr</span>. It takes supplied vectors and creates a variable communicating
the mean of the variable. It then renames these new variables to have a
prefix of <code>mean_</code>. This default prefix ("mean") can be changed by way of
an argument in the function.</p>
<p><code>r1sd_at</code> is a wrapper for <code>mutate</code> and <code>across</code> from
<span class="pkg">dplyr</span>. It both rescales the supplied vectors to new vectors and renames
the vectors to each have a prefix of <code>s_</code>. Note the rescaling here is
just by one standard deviation and not two. The default prefix ("s") can be
changed by way of an argument in the function.</p>
<p><code>r2sd_at</code> is a wrapper for <code>mutate</code> and <code>across</code> from
<span class="pkg">dplyr</span>. It both rescales the supplied vectors to new vectors and renames
the vectors to each have a prefix of <code>z_</code>. Note the rescaling here is by
two standard deviations and not one. The default prefix ("z") can be
changed by way of an argument in the function.</p>
<p><code>rewb_at</code> is a wrapper for routines done by <code>mean_at</code>,
<code>group_mean_center_at</code>, and <code>center_at</code> in this package. It
implicitly assumes the data are a panel and runs these three routines in order
to create so-called "between" and "within" variables for a "random effects,
within-between" analysis. Means are calculated based on available data, so
there is no <code>na</code> argument available in this function. The function will fail
in the presence of variables in the data matching those that this routine
wants to create.</p>
<p>All functions, except for <code>lag_at</code>, will fail in the absence of a
character vector of a length of one. They are intended to work across multiple
columns instead of just one. If you are wanting to create one new variable,
you should think about using some other <span class="pkg">dplyr</span> verb on its own.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">8675309</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Example</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>category <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                   <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                   <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"C"</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">15</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">15</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      z <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, <span class="fl">15</span>, replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">my_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">center_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z         c_x         c_y c_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9 -0.45270578  0.38488743  -4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 -0.13400109  0.18302851   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15  0.15260928 -0.32708389   2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20  0.15749826  0.28358381   7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 -0.34364092  0.18252640   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14  0.06085649 -0.47270853   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17  0.36660137  0.31376756   4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8  0.23413755  0.31342741  -5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16  0.24446673 -0.20072218   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 -0.16702927  0.02631747   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12  0.22604312  0.13613631  -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 -0.02887250 -0.27869455   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 -0.10123826 -0.45415826  -8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 -0.35202128 -0.37336494  -7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6  0.13729632  0.28305746  -7</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">diff_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z          d_x           d_y d_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9           NA            NA  NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19  0.318704692 -0.2018589161  10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15  0.286610370 -0.5101124048  -4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20  0.004888979  0.6106676969   5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 -0.501139179 -0.1010574063  -6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14  0.404497413 -0.6552349348   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17  0.305744875  0.7864760908   3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8 -0.132463813 -0.0003401469  -9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16  0.010329181 -0.5141495881   8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 -0.411496004  0.2270396501   0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12  0.393072386  0.1098188350  -4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 -0.254915616 -0.4148308551   6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 -0.072365765 -0.1754637090 -13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 -0.250783015  0.0807933176   1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6  0.489317597  0.6564223976   0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">diff_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span>, o<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z         d3_x          d3_y d3_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9           NA            NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19           NA            NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15           NA            NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20  0.610204041 -0.1013036240   11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 -0.209639830 -0.0005021142   -5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14 -0.091752786 -0.1456246441   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17  0.209103110  0.0301837497   -3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8  0.577778475  0.1309010091   -6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16  0.183610243  0.2719863558    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 -0.533630636 -0.2874500849   -1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12 -0.008094437 -0.1772911029    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 -0.273339234 -0.0779723700    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5  0.065791005 -0.4804757291  -11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 -0.578064396 -0.5095012465   -6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6  0.166168816  0.5617520062  -12</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">lag_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z      l1_x       l1_y l1_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9        NA         NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 0.1594836 0.91822046    9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15 0.4781883 0.71636154   19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20 0.7647987 0.20624914   15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 0.7696877 0.81691683   20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14 0.2685485 0.71585943   14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17 0.6730459 0.06062449   14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8 0.9787908 0.84710058   17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16 0.8463270 0.84676044    8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 0.8566562 0.33261085   16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12 0.4451601 0.55965050   16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 0.8382325 0.66946933   12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 0.5833169 0.25463848   18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 0.5109512 0.07917477    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6 0.2601681 0.15996809    6</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">lag_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span>, o<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z      l1_x      l2_x      l3_x       l1_y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9        NA        NA        NA         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 0.1594836        NA        NA 0.91822046</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15 0.4781883 0.1594836        NA 0.71636154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20 0.7647987 0.4781883 0.1594836 0.20624914</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 0.7696877 0.7647987 0.4781883 0.81691683</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14 0.2685485 0.7696877 0.7647987 0.71585943</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17 0.6730459 0.2685485 0.7696877 0.06062449</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8 0.9787908 0.6730459 0.2685485 0.84710058</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16 0.8463270 0.9787908 0.6730459 0.84676044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 0.8566562 0.8463270 0.9787908 0.33261085</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12 0.4451601 0.8566562 0.8463270 0.55965050</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 0.8382325 0.4451601 0.8566562 0.66946933</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 0.5833169 0.8382325 0.4451601 0.25463848</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 0.5109512 0.5833169 0.8382325 0.07917477</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6 0.2601681 0.5109512 0.5833169 0.15996809</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          l2_y       l3_y l1_z l2_z l3_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1          NA         NA   NA   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          NA         NA    9   NA   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  0.91822046         NA   19    9   NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  0.71636154 0.91822046   15   19    9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.20624914 0.71636154   20   15   19</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  0.81691683 0.20624914   14   20   15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  0.71585943 0.81691683   14   14   20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  0.06062449 0.71585943   17   14   14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  0.84710058 0.06062449    8   17   14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 0.84676044 0.84710058   16    8   17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 0.33261085 0.84676044   16   16    8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 0.55965050 0.33261085   12   16   16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 0.66946933 0.55965050   18   12   16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 0.25463848 0.66946933    5   18   12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 0.07917477 0.25463848    6    5   18</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">log_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z        ln_x        ln_y     ln_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9 -1.83581396 -0.08531777 2.197225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 -0.73775063 -0.33357029 2.944439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15 -0.26814262 -1.57867043 2.708050</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20 -0.26177046 -0.20221798 2.995732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 -1.31472376 -0.33427146 2.639057</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14 -0.39594173 -2.80305628 2.639057</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17 -0.02143736 -0.16593584 2.833213</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8 -0.16684950 -0.16633746 2.079442</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16 -0.15471866 -1.10078209 2.772589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 -0.80932117 -0.58044280 2.772589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12 -0.17645973 -0.40126992 2.484907</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 -0.53902464 -1.36791047 2.890372</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 -0.67148128 -2.53609759 1.609438</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 -1.34642717 -1.83278093 1.791759</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6 -0.28836799 -0.20286250 1.791759</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">log_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span>, plus_1 <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z      ln_x       ln_y     ln_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9 0.1479748 0.65139791 2.302585</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 0.3908172 0.54020667 2.995732</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15 0.5680366 0.18751566 2.772589</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20 0.5708031 0.59714102 3.044522</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 0.2378733 0.53991408 2.708050</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14 0.5146459 0.05885788 2.708050</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17 0.6824859 0.61361716 2.890372</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8 0.6131982 0.61343299 2.197225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16 0.6187771 0.28714006 2.833213</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 0.3682201 0.44446176 2.833213</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12 0.6088045 0.51250581 2.564949</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 0.4595220 0.22684747 2.944439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 0.4127394 0.07619665 1.791759</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 0.2312452 0.14839249 1.945910</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6 0.5593219 0.59685128 1.945910</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">mean_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z    mean_x   mean_y mean_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 0.6121894 0.533333     13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6 0.6121894 0.533333     13</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">r1sd_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z        s_x         s_y        s_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9 -1.8112227  1.22348833 -0.7954674</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 -0.5361226  0.58181493  1.1932011</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15  0.6105718 -1.03974121  0.3977337</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20  0.6301320  0.90146222  1.3920679</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 -1.3748670  0.58021879  0.1988668</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14  0.2434797 -1.50265592  0.1988668</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17  1.4667290  0.99741097  0.7954674</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8  0.9367569  0.99632970 -0.9943342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16  0.9780827 -0.63805992  0.5966005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 -0.6682645  0.08365854  0.5966005</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12  0.9043720  0.43275298 -0.1988668</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 -0.1155155 -0.88592015  0.9943342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 -0.4050424 -1.44368791 -1.5909348</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 -1.4083958 -1.18686040 -1.3920679</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6  0.5493064  0.89978905 -1.3920679</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">r2sd_at</span><span class="op">(</span><span class="va">Example</span>, <span class="va">my_vars</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    category         x          y  z         z_x         z_y         z_z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         A 0.1594836 0.91822046  9 -0.90561135  0.61174417 -0.39773369</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         A 0.4781883 0.71636154 19 -0.26806132  0.29090746  0.59660054</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3         A 0.7647987 0.20624914 15  0.30528590 -0.51987061  0.19886685</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4         A 0.7696877 0.81691683 20  0.31506602  0.45073111  0.69603396</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5         A 0.2685485 0.71585943 14 -0.68743350  0.29010940  0.09943342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6         B 0.6730459 0.06062449 14  0.12173984 -0.75132796  0.09943342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7         B 0.9787908 0.84710058 17  0.73336452  0.49870548  0.39773369</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8         B 0.8463270 0.84676044  8  0.46837843  0.49816485 -0.49716712</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9         B 0.8566562 0.33261085 16  0.48904135 -0.31902996  0.29830027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10        B 0.4451601 0.55965050 16 -0.33413225  0.04182927  0.29830027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11        C 0.8382325 0.66946933 12  0.45218599  0.21637649 -0.09943342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        C 0.5833169 0.25463848 18 -0.05775774 -0.44296007  0.49716712</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        C 0.5109512 0.07917477  5 -0.20252121 -0.72184395 -0.79546739</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14        C 0.2601681 0.15996809  6 -0.70419791 -0.59343020 -0.69603396</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15        C 0.7494857 0.81639049  6  0.27465322  0.44989453 -0.69603396</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steve Miller.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

