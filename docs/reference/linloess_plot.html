<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compare Linear Smoother to LOESS Smoother for Your Linear Model — linloess_plot • stevemisc</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Compare Linear Smoother to LOESS Smoother for Your Linear Model — linloess_plot"><meta name="description" content="linloess_plot() provides a visual diagnostic of the
linearity assumption of the OLS model. Provided a linear model fit by
lm() in base R, the function extracts the model frame and creates a
faceted scatterplot. For each facet, a linear smoother and LOESS smoother
are estimated over the points. Users who run this function can assess just
how much the linear smoother and LOESS smoother diverge. The more they
diverge, the more the user can determine how much the linear model is a good
fit as specified. The plot will also point to potential outliers that may
need further consideration."><meta property="og:description" content="linloess_plot() provides a visual diagnostic of the
linearity assumption of the OLS model. Provided a linear model fit by
lm() in base R, the function extracts the model frame and creates a
faceted scatterplot. For each facet, a linear smoother and LOESS smoother
are estimated over the points. Users who run this function can assess just
how much the linear smoother and LOESS smoother diverge. The more they
diverge, the more the user can determine how much the linear model is a good
fit as specified. The plot will also point to potential outliers that may
need further consideration."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">stevemisc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.8.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/svmiller/stevemisc/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compare Linear Smoother to LOESS Smoother for Your Linear Model</h1>
      <small class="dont-index">Source: <a href="https://github.com/svmiller/stevemisc/blob/HEAD/R/linloess_plot.R" class="external-link"><code>R/linloess_plot.R</code></a></small>
      <div class="d-none name"><code>linloess_plot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>linloess_plot()</code> provides a visual diagnostic of the
linearity assumption of the OLS model. Provided a linear model fit by
<code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code> in base R, the function extracts the model frame and creates a
faceted scatterplot. For each facet, a linear smoother and LOESS smoother
are estimated over the points. Users who run this function can assess just
how much the linear smoother and LOESS smoother diverge. The more they
diverge, the more the user can determine how much the linear model is a good
fit as specified. The plot will also point to potential outliers that may
need further consideration.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">linloess_plot</span><span class="op">(</span></span>
<span>  <span class="va">mod</span>,</span>
<span>  resid <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  smoother <span class="op">=</span> <span class="st">"loess"</span>,</span>
<span>  se <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  span <span class="op">=</span> <span class="fl">0.75</span>,</span>
<span>  no_dummies <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  suppress_warning <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'linloess'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mod">mod<a class="anchor" aria-label="anchor" href="#arg-mod"></a></dt>
<dd><p>a fitted model, ideally a simple linear model</p></dd>


<dt id="arg-resid">resid<a class="anchor" aria-label="anchor" href="#arg-resid"></a></dt>
<dd><p>logical, defaults to <code>TRUE</code>. If <code>FALSE</code>, the y-axis
on these plots are the raw values of the dependent variable. If <code>TRUE</code>,
the y-axis is the model's residuals. Either work well here for the matter
at hand, provided you treat the output here as illustrative or suggestive.</p></dd>


<dt id="arg-smoother">smoother<a class="anchor" aria-label="anchor" href="#arg-smoother"></a></dt>
<dd><p>defaults to "loess", and is passed to the 'method' argument
for the non-linear smoother.</p></dd>


<dt id="arg-se">se<a class="anchor" aria-label="anchor" href="#arg-se"></a></dt>
<dd><p>logical, defaults to <code>TRUE</code>. If <code>TRUE</code>, gives standard
error estimates with the assorted smoothers. If <code>resid</code> is <code>TRUE</code>,
there is no standard error for a flat line at 0.</p></dd>


<dt id="arg-span">span<a class="anchor" aria-label="anchor" href="#arg-span"></a></dt>
<dd><p>a numeric, defaults to .75. An adjustment to the smoother. Higher
values permit smoother lines and might be warranted in the presence of
sparse pockets of the data.</p></dd>


<dt id="arg-no-dummies">no_dummies<a class="anchor" aria-label="anchor" href="#arg-no-dummies"></a></dt>
<dd><p>logical, defaults to <code>FALSE</code>. If <code>TRUE</code>, removes
binary independent variables from the plot. If <code>FALSE</code>, facets appear for
binary independent variables. You should probably just set this to <code>TRUE</code>
for your own use cases.</p></dd>


<dt id="arg-suppress-warning">suppress_warning<a class="anchor" aria-label="anchor" href="#arg-suppress-warning"></a></dt>
<dd><p>logical, defaults to <code>TRUE</code>. If <code>TRUE</code>,
the plot suppresses assorted warnings from the LOESS smoother that would
otherwise be cautioning you about things your eyes could otherwise see.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments (passed to the scatterplot in <code>linloess_plot()</code>, not used in the print function</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>a ggplot object with this special 'linloess' class</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>linloess_plot()</code> returns a faceted scatterplot as a
<span class="pkg">ggplot2</span> object. The linear smoother is in solid blue (with blue
standard error bands) and the LOESS smoother is a dashed black line (with
gray/default standard error bands). You can add cosmetic features to it after
the fact. The function may spit warnings to you related to the LOESS smoother,
depending your data and whether you have disabled the warnings in the
function. I think these to be fine the extent to which this is really just a
visual aid and an informal diagnostic for the linearity assumption.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function makes an implicit assumption that there is no variable
in the regression formula with the name ".y" or ".resid".</p>
<p>It may be in your interest (for the sake of rudimentary diagnostic checks) to
disable the standard error bands for particularly ill-fitting linear models.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Steven V. Miller</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">M1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">~</span> <span class="va">am</span> <span class="op">+</span> <span class="va">carb</span> <span class="op">+</span> <span class="va">disp</span>, data<span class="op">=</span><span class="va">mtcars</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">linloess_plot</span><span class="op">(</span><span class="va">M1</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using formula = 'y ~ x'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using formula = 'y ~ x'</span>
<span class="r-plt img"><img src="linloess_plot-1.png" alt="" width="1056" height="653"></span>
<span class="r-in"><span><span class="fu">linloess_plot</span><span class="op">(</span><span class="va">M1</span>, color<span class="op">=</span><span class="st">"black"</span>, pch<span class="op">=</span><span class="fl">21</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using formula = 'y ~ x'</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> `geom_smooth()` using formula = 'y ~ x'</span>
<span class="r-plt img"><img src="linloess_plot-2.png" alt="" width="1056" height="653"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steve Miller.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

